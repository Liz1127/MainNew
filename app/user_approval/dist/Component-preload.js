//@ui5-bundle my/userapproval/Component-preload.js
sap.ui.require.preload({
	"my/userapproval/Component.js":function(){
sap.ui.define(["sap/ui/core/UIComponent","sap/ui/Device","my/userapproval/model/models"],function(e,t,i){"use strict";return e.extend("my.userapproval.Component",{metadata:{manifest:"json"},init:function(){e.prototype.init.apply(this,arguments);this.getRouter().initialize();this.setModel(i.createDeviceModel(),"device")}})});
},
	"my/userapproval/controller/App.controller.js":function(){
sap.ui.define(["sap/ui/core/mvc/Controller"],function(n){"use strict";return n.extend("my.userapproval.controller.App",{onInit:function(){}})});
},
	"my/userapproval/controller/smarttable.controller.js":function(){
sap.ui.define(["sap/ui/core/mvc/Controller","sap/m/MessageToast","sap/m/Dialog","sap/m/Button","sap/m/Select","sap/ui/core/Item"],function(e,t,s,n,a,i){"use strict";return e.extend("my.userapproval.controller.smarttable",{onInit:function(){var e=new sap.ui.model.odata.v2.ODataModel("/odata/v2/user-validity");e.refreshMetadata();this.getView().setModel(e);this._selectedItem=null;var t=this.byId("smartTable");var s=t.getTable();s.attachRowSelectionChange(this.onSelectionChange,this)},onSelectionChange:function(e){var t=e.getSource();var s=t.getSelectedIndex();var n=t.getContextByIndex(s);var a=this.byId("sendEmailButton");var i=this.byId("editAssignmentButton");if(n){this._selectedItem=n.getObject();console.log("Selected Item:",this._selectedItem);var o=this._selectedItem.status;if(o==="1 week to go"||o==="3 days to go"||o==="1 day to go"){a.setEnabled(true);i.setEnabled(true);if(!this._selectedItem.assignment||this._selectedItem.assignment!=="Assigned"){this._selectedItem.assignment="Not Assigned"}}else{a.setEnabled(false);i.setEnabled(false)}}else{this._selectedItem=null;a.setEnabled(false);i.setEnabled(false);console.log("No item selected")}},onSendEmail:function(){if(!this._selectedItem){t.show("Please select a user to send an email.");return}var e=this._selectedItem.mailID;var s=this._selectedItem.status;var n=this._selectedItem.userID;if(!e){t.show("Mail ID is not available for the selected user.");return}var a=`Dear ${n}, You have ${s} before your approval access expires.`;var i={to:e,subject:"Approval Access Expiry Notification",text:a};$.ajax({url:"/odata/v4/mail/sendmail",method:"POST",contentType:"application/json",data:JSON.stringify(i),success:function(){t.show("Email sent to: "+e+"\n(User ID: "+n+")")},error:function(e){t.show("Failed to send email. Please try again.");console.error("Error sending email:",e)}})},onEditAssignment:function(){if(!this._selectedItem){t.show("Please select a user to edit the assignment.");return}var e=this._selectedItem.assignment;if(e==="Assigned"){t.show("Assignment cannot be edited once it is set to 'Assigned'.");return}var o=new s({title:"Edit Assignment",content:new a({items:[new i({text:"Assigned",key:"Assigned"}),new i({text:"Not Assigned",key:"Not Assigned"})],selectedKey:e||"Not Assigned"}),beginButton:new n({text:"Save",press:function(){var e=o.getContent()[0].getSelectedKey();this._selectedItem.assignment=e;$.ajax({url:"/odata/v4/user-validity/updateAssignment",method:"POST",contentType:"application/json",data:JSON.stringify({userID:this._selectedItem.userID,assignment:e}),success:function(){t.show("Assignment updated successfully.");o.close();var e=this.getView().getModel();e.refresh(true)}.bind(this),error:function(e){t.show("Failed to update assignment. Please try again.");console.error("Error updating assignment:",e);console.log("Error details:",e.responseText)}})}.bind(this)}),endButton:new n({text:"Cancel",press:function(){o.close()}})});this.getView().addDependent(o);o.open()}})});
},
	"my/userapproval/i18n/i18n.properties":'# This is the resource bundle for my.userapproval\n\n#Texts for manifest.json\n\n#XTIT: Application name\nappTitle=user\n\n#YDES: Application description\nappDescription=An SAP Fiori application.\n#XTIT: Main view title\ntitle=user',
	"my/userapproval/manifest.json":'{"_version":"1.65.0","sap.app":{"id":"my.userapproval","type":"application","i18n":"i18n/i18n.properties","applicationVersion":{"version":"0.0.1"},"title":"{{appTitle}}","description":"{{appDescription}}","resources":"resources.json","sourceTemplate":{"id":"@sap/generator-fiori:basic","version":"1.15.3","toolsId":"cf1c5ccd-d996-4bd8-a15e-7964bdfe4e43"},"dataSources":{"mainService":{"uri":"odata/v2/user-validity/","type":"OData","settings":{"annotations":[],"odataVersion":"2.0"}}}},"sap.ui":{"technology":"UI5","icons":{"icon":"","favIcon":"","phone":"","phone@2":"","tablet":"","tablet@2":""},"deviceTypes":{"desktop":true,"tablet":true,"phone":true}},"sap.ui5":{"flexEnabled":false,"dependencies":{"minUI5Version":"1.130.0","libs":{"sap.m":{},"sap.ui.core":{},"sap.ui.table":{}}},"contentDensities":{"compact":true,"cozy":true},"models":{"i18n":{"type":"sap.ui.model.resource.ResourceModel","settings":{"bundleName":"my.userapproval.i18n.i18n"}},"":{"dataSource":"mainService","preload":true,"settings":{"operationMode":"Server","autoExpandSelect":true,"earlyRequests":true}}},"resources":{"css":[{"uri":"css/style.css"}]},"routing":{"config":{"routerClass":"sap.m.routing.Router","viewType":"XML","async":true,"viewPath":"my.userapproval.view","controlAggregation":"pages","controlId":"app","clearControlAggregation":false},"routes":[{"name":"Routesmarttable","pattern":":?query:","target":["Targetsmarttable"]}],"targets":{"Targetsmarttable":{"viewType":"XML","transition":"slide","clearControlAggregation":false,"viewId":"smarttable","viewName":"smarttable"}}},"rootView":{"viewName":"my.userapproval.view.App","type":"XML","async":true,"id":"App"}},"sap.cloud":{"public":true,"service":"approval"}}',
	"my/userapproval/model/models.js":function(){
sap.ui.define(["sap/ui/model/json/JSONModel","sap/ui/Device"],function(e,n){"use strict";return{createDeviceModel:function(){var i=new e(n);i.setDefaultBindingMode("OneWay");return i}}});
},
	"my/userapproval/view/App.view.xml":'<mvc:View controllerName="my.userapproval.controller.App"\n    xmlns:html="http://www.w3.org/1999/xhtml"\n    xmlns:mvc="sap.ui.core.mvc" displayBlock="true"\n    xmlns="sap.m"><App id="app"></App></mvc:View>\n',
	"my/userapproval/view/smarttable.view.xml":'<mvc:View\n    controllerName="my.userapproval.controller.smarttable"\n    xmlns:mvc="sap.ui.core.mvc"\n    xmlns="sap.m"\n    xmlns:core="sap.ui.core"\n    xmlns:smartTable="sap.ui.comp.smarttable"\n    xmlns:smartFilterBar="sap.ui.comp.smartfilterbar"\n    xmlns:table="sap.ui.table"><Page\n        title="User Validity Worklist"><content><smartFilterBar:SmartFilterBar\n                    id="smartFilterBar"\n                    entitySet="UserValidityWithApproval"\n                    persistencyKey="SmartFilter_UserValidity"\n                    basicSearchFieldName="userID"\n                    enableBasicSearch="true"\n                    showGoOnFB="true"\n                    showFilterConfiguration="true"><smartFilterBar:controlConfiguration><smartFilterBar:ControlConfiguration key="userID" label="User ID" /><smartFilterBar:ControlConfiguration key="startDate" label="Start Date" /><smartFilterBar:ControlConfiguration key="endDate" label="End Date"/><smartFilterBar:ControlConfiguration key="status" label="Status"/><smartFilterBar:ControlConfiguration key="assignment" label="Assignment"/><smartFilterBar:ControlConfiguration key="approver" label="Approver"/><smartFilterBar:ControlConfiguration key="levelOfApproval" label="Level of Approval"/><smartFilterBar:ControlConfiguration key="mailID" label="Mail ID"/></smartFilterBar:controlConfiguration></smartFilterBar:SmartFilterBar><smartTable:SmartTable\n                    id="smartTable"\n                    entitySet="UserValidityWithApproval"\n                    smartFilterId="smartFilterBar"\n                    tableType="Table"\n                    enableExport="true"\n                    useVariantManagement="true"\n                    header="User Validity"\n                    showRowCount="true"\n                    beforeRebindTable="onBeforeRebindTable"\n                    placeToolbarInTable="true"\n                    enableAutoBinding="true"\n                    enableAutoColumnWidth="true"\n                    initiallyVisibleFields="userID,approver,levelOfApproval,startDate,endDate,status,assignment,mailID"><smartTable:customToolbar><Toolbar><ToolbarSpacer/><Button \n                            id="sendEmailButton"\n                            text="Send Email" \n                            press="onSendEmail"\n                            enabled="false"/><Button \n                            id="editAssignmentButton"\n                            text="Edit Assignment" \n                            press="onEditAssignment"\n                            enabled="false"/></Toolbar></smartTable:customToolbar><table:Table\n                    selectionMode="Single"\n                    selectionBehavior="RowOnly"></table:Table></smartTable:SmartTable></content></Page></mvc:View>\n\n\n\n\n\n\n\n\n\n'
});
//# sourceMappingURL=Component-preload.js.map
